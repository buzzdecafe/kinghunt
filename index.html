<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>KingHunt</title>
    <style>
      .Error {
        padding: 3px;
        border: 2px solid #ff0000;
      }
      .Success {
        padding: 3px;
        border: 2px solid #00ff00;
      }

    </style>
  </head>
  <body>
    <h1>KingHunt</h1>
    <p>FirefoxOS packaged app installation page</p>

    <div id="output"></div>
    <script>
      (function() {
        var output = document.getElementById("output");
        var manifestUrl = 'http://buzzdecafe.github.io/kinghunt/package.manifest';
        var req;

        function logToScreen(type) {
          return function() {
            output.innerHTML = "<h3>" + type + "</h3><pre>" + JSON.stringify(this, null, 4) + "</pre>";
            output.className = type;
          };
        }

        if (!navigator.mozApps || !navigator.mozApps.installPackage) {
          output.innerHTML = "This is for installing on FirefoxOS. Maybe other platforms eventually.";
          output.className = "fail";
          return;
        }

        req = navigator.mozApps.installPackage(manifestUrl);
        req.onsuccess = logToScreen("Success");
        req.onerror = logToScreen("Error");
      }());

    </script>
  </body>
</html>


