<!DOCTYPE html>
<html>
  <head>
    <title>KingHunt</title>
    <style>
      .fail {
        padding: 3px;
        border: 2px solid #ff0000;
      }
      .succeed {
        padding: 3px;
        border: 2px solid #00ff00;
      }

    </style>
  </head>
  <body>
    <h1>KingHunt</h1>
    <p>Packaged app installation page</p>

    <div id="output"></div>
    <script>
      (function() {
        var output = document.getElementById("output");
        if (!navigator.mozApps || !navigator.mozApps.installPackage) {
          output.innerHTML = "This is for installing on FirefoxOS. Maybe other platforms eventually.";
          output.className = "fail";
          return;
        }
        // This URL must be a full url.
        var manifestUrl = 'http://buzzdecafe.github.io/kinghunt/package.manifest';
        var req = navigator.mozApps.installPackage(manifestUrl);
        req.onsuccess = function() {
          output.innerHTML = "<h3>Success</h3><pre>" + JSON.stringify(this.result, null, 4) + "</pre>";
          output.className = "succeed";
        };
        req.onerror = function() {
          output.innerHTML =  "<h3>Error</h3><pre>" + JSON.stringify(this.error, null, 4) + "</pre>";
          output.className = "fail";
        };
      }());

    </script>
  </body>
</html>


